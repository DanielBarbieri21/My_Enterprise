<div class="container mx-auto p-6 max-w-2xl">
  <h1 class="text-3xl font-bold mb-6">
    {{ isEditMode ? 'Edit Product' : 'Create Product' }}
  </h1>

  <mat-card class="shadow-lg">
    <mat-card-content>
      <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Product Name</mat-label>
          <input matInput formControlName="name" placeholder="Enter product name" />
          @if (productForm.get('name')?.hasError('required')) {
            <mat-error>Name is required</mat-error>
          }
          @if (productForm.get('name')?.hasError('minlength')) {
            <mat-error>Name must be at least 3 characters</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Description</mat-label>
          <textarea
            matInput
            formControlName="description"
            placeholder="Enter product description"
            rows="4"
          ></textarea>
          @if (productForm.get('description')?.hasError('required')) {
            <mat-error>Description is required</mat-error>
          }
        </mat-form-field>

        <div class="grid grid-cols-2 gap-4">
          <mat-form-field appearance="outline">
            <mat-label>Price</mat-label>
            <input matInput type="number" formControlName="price" placeholder="0.00" step="0.01" />
            <span matPrefix>$&nbsp;</span>
            @if (productForm.get('price')?.hasError('required')) {
              <mat-error>Price is required</mat-error>
            }
            @if (productForm.get('price')?.hasError('min')) {
              <mat-error>Price must be positive</mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Stock</mat-label>
            <input matInput type="number" formControlName="stock" placeholder="0" />
            @if (productForm.get('stock')?.hasError('required')) {
              <mat-error>Stock is required</mat-error>
            }
            @if (productForm.get('stock')?.hasError('min')) {
              <mat-error>Stock must be positive</mat-error>
            }
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Category</mat-label>
          <mat-select formControlName="category">
            @for (category of categories; track category) {
              <mat-option [value]="category">{{ category }}</mat-option>
            }
          </mat-select>
          @if (productForm.get('category')?.hasError('required')) {
            <mat-error>Category is required</mat-error>
          }
        </mat-form-field>

        <div class="flex gap-4 justify-end mt-4">
          <button mat-button type="button" (click)="onCancel()">Cancel</button>
          <button mat-raised-button color="primary" type="submit" [disabled]="productForm.invalid">
            {{ isEditMode ? 'Update' : 'Create' }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
